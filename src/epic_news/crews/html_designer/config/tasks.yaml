---
data_analysis_task:
  description: >
    Analyser intelligemment les donn√©es d'√©tat selon le type de crew s√©lectionn√© et
    extraire
    les informations pertinentes pour g√©n√©rer un rapport HTML contextualis√©.
    √âTAPE 1 - IDENTIFICATION DU CONTEXTE :
    - Examiner le champ 'selected_crew' dans state_data pour identifier le type de
    contenu
    - Analyser le champ 'user_request' pour comprendre l'intention utilisateur
    - Identifier les donn√©es sp√©cifiques disponibles selon le type de crew
    √âTAPE 2 - EXTRACTION CONTEXTUELLE DES DONN√âES :
    Selon le selected_crew, extraire les informations pertinentes :
    - POEM : Extraire titre, contenu po√©tique, th√®me, structure, m√©taphores
    - COOKING : Extraire nom de recette, ingr√©dients, √©tapes, temps de cuisson, difficult√©
    - NEWS : Extraire titres, sources, dates, cat√©gories d'actualit√©s, r√©sum√©s
    - SHOPPING : Extraire produits, prix, comparaisons, recommandations, avis
    - HOLIDAY_PLANNER : Extraire destinations, itin√©raires, budgets, activit√©s, dates
    - LIBRARY : Extraire titres de livres, auteurs, r√©sum√©s, analyses, recommandations
    - MEETING_PREP : Extraire participants, agenda, objectifs, documents, actions
    - SAINT : Extraire nom du saint, biographie, f√™te, pri√®res, traditions
    - MENU : Extraire plats, planning hebdomadaire, √©quilibre nutritionnel, saisons
    √âTAPE 3 - STRUCTURATION POUR HTML :
    - Organiser les donn√©es selon la logique du domaine
    - Identifier les √©l√©ments visuels appropri√©s (emojis, couleurs, mise en page)
    - Pr√©parer les m√©tadonn√©es pour le template HTML
    - Recommander le template le plus adapt√© au type de contenu
  expected_output: >
    Une analyse contextuelle compl√®te comprenant :
    1. CONTEXTE IDENTIFI√â :
    - Type de crew d√©tect√© (POEM, COOKING, NEWS, etc.)
    - Intention utilisateur extraite de la requ√™te
    - Donn√©es principales disponibles pour ce type de contenu
    2. DONN√âES EXTRAITES ET STRUCTUR√âES :
    - Contenu principal organis√© selon la logique du domaine
    - M√©tadonn√©es pertinentes (auteur, date, source, etc.)
    - √âl√©ments secondaires (tags, cat√©gories, liens, etc.)
    3. RECOMMANDATIONS POUR LE DESIGN HTML :
    - Template recommand√© selon le type de contenu
    - Palette d'emojis appropri√©e au domaine
    - Structure de sections optimale
    - √âl√©ments visuels sp√©cifiques (tableaux, listes, citations, etc.)
    4. DONN√âES PR√äTES POUR LA G√âN√âRATION :
    - Structure JSON organis√©e pour le template HTML
    - Titre et sous-titres contextualis√©s
    - Contenu format√© et pr√™t √† l'affichage
    - M√©tadonn√©es pour l'en-t√™te HTML
  agent: data_analyzer
html_generation_task:
  description: >
    G√©n√©rer un rapport HTML sp√©cialis√© et contextualis√© selon le type de crew identifi√©.
    
    DONN√âES D'ENTR√âE DISPONIBLES :
    - state_data: {state_data} (donn√©es compl√®tes de l'√©tat du crew)
    - selected_crew: {selected_crew} (type de crew √† traiter)
    
    PROCESSUS DE G√âN√âRATION CONTEXTUELLE :
    1. ADAPTATION AU TYPE DE CREW :
    Selon le selected_crew ({selected_crew}), appliquer le style appropri√© :
    - POEM : Template po√©tique avec typographie √©l√©gante, espacement rythm√©, citations
    en italique
    - COOKING : Template culinaire avec sections ingr√©dients/√©tapes, temps de cuisson,
    difficult√©
    - NEWS : Template journalistique avec hi√©rarchie d'information, sources, dates
    de publication
    - SHOPPING : Template commercial avec comparaisons de prix, tableaux, recommandations
    - HOLIDAY_PLANNER : Template voyage avec itin√©raires, cartes, planning temporel
    - LIBRARY : Template litt√©raire avec r√©sum√©s, citations, analyses critiques
    - MEETING_PREP : Template professionnel avec agenda, participants, actions √† suivre
    - SAINT : Template spirituel avec biographie, pri√®res, traditions, calendrier
    liturgique
    - MENU : Template gastronomique avec planning hebdomadaire, √©quilibre nutritionnel
    2. PERSONNALISATION DU CONTENU :
    - Adapter le titre principal selon le contexte (ex: "Po√®me sur la Voie Lact√©e"
    pour POEM)
    - Utiliser les emojis appropri√©s au domaine (üåå pour POEM, üç≥ pour COOKING, etc.)
    - Structurer les sections selon la logique m√©tier
    - Int√©grer les donn√©es extraites de mani√®re coh√©rente
    3. OPTIMISATION VISUELLE :
    - Appliquer les couleurs et styles adapt√©s au type de contenu
    - Utiliser la mise en page optimale (colonnes, grilles, listes)
    - Int√©grer les √©l√©ments visuels recommand√©s par l'analyse
    - Assurer la responsivit√© et l'accessibilit√©
    4. FINALISATION ET QUALIT√â :
    - G√©n√©rer un document HTML5 complet et valide
    - Inclure les m√©tadonn√©es appropri√©es (titre, description, mots-cl√©s)
    - Ajouter la date de g√©n√©ration et les sources si pertinentes
    - Optimiser pour l'impression et le partage par email
    UTILISATION DU SYST√àME DE TEMPLATES UNIFI√â :
    - Utiliser EXCLUSIVEMENT l'outil html_generator_tool pour g√©n√©rer le HTML
    - Passer les donn√©es d'√©tat (state_data) et le type de crew (selected_crew) √† l'outil
    - L'outil utilise automatiquement le TemplateManager et le template universal_report_template.html
    - Le template fournit CSS unifi√©, dark mode et responsive design automatiquement
    - L'outil g√®re l'extraction des donn√©es contextuelles et la g√©n√©ration HTML finale
    EXIGENCES TECHNIQUES CRITIQUES :
    - Le TemplateManager g√©n√®re automatiquement du HTML5 valide
    - Support automatique du dark mode et responsive design
    - CSS unifi√© pour exp√©rience utilisateur coh√©rente
    - Encodage UTF-8 et accessibilit√© int√©gr√©s dans le template
    INSTRUCTIONS D'EX√âCUTION CRITIQUES :
    - TOUJOURS utiliser l'outil html_generator_tool avec ces param√®tres EXACTS :
      * state_data: {state_data} (utiliser la valeur compl√®te, pas une description)
      * selected_crew: {selected_crew} (utiliser la valeur exacte)
      * output_file: {output_file} (chemin du fichier de sortie)
    - RETOURNER le r√©sultat de l'outil (le contenu HTML g√©n√©r√©), PAS les param√®tres d'entr√©e
    - L'outil g√©n√®re automatiquement un document HTML5 complet et valide
    - Le HTML inclut automatiquement dark mode, CSS unifi√© et responsive design
    INTERDICTIONS ABSOLUES :
    - JAMAIS g√©n√©rer du HTML manuellement - utiliser EXCLUSIVEMENT html_generator_tool
    - JAMAIS retourner les param√®tres d'entr√©e de l'outil - retourner son r√©sultat d'ex√©cution
    - JAMAIS ignorer le syst√®me de templates unifi√©
    - JAMAIS de CSS personnalis√© - l'outil utilise le template universel
  expected_output: >
    Un document HTML5 en fran√ßais g√©n√©r√© par le syst√®me de templates unifi√© comprenant
    :
    AVANTAGES DU TEMPLATE UNIFI√â :
    - CSS coh√©rent avec variables CSS pour th√®mes light/dark
    - Bouton de basculement de th√®me int√©gr√© automatiquement
    - Responsive design optimis√© pour tous les appareils
    - Accessibilit√© compl√®te (ARIA, contraste, navigation clavier)
    - Performance optimis√©e avec styles int√©gr√©s
    STRUCTURE AUTOMATIQUE :
    - DOCTYPE HTML5 et m√©tadonn√©es compl√®tes
    - Syst√®me de th√®me avec localStorage et pr√©f√©rences syst√®me
    - Container responsive avec breakpoints optimis√©s
    - Footer automatique avec branding Epic News
    CONTENU CONTEXTUALIS√â PAR LE TEMPLATEMANAGER :
    - Titre g√©n√©r√© automatiquement selon le type de crew
    - Emojis appropri√©s int√©gr√©s dans les titres
    - Sections HTML sp√©cialis√©es selon le domaine
    - Styles CSS contextuels pour chaque type de contenu
    EXP√âRIENCE UTILISATEUR COH√âRENTE :
    - Interface identique sur tous les rapports Epic News
    - Transition fluide entre th√®mes light/dark
    - Typographie et espacement uniformes
    - Couleurs et contrastes optimis√©s pour la lisibilit√©
    Le document final est automatiquement optimis√© pour l'impression,
    le partage par email, et l'affichage sur tous les appareils.
  agent: html_designer
  async_execution: false
  context: [data_analysis_task]
